{"version":3,"file":"index.umd.js","sources":["../src/link.js","../src/remember.js","../src/app.js"],"sourcesContent":["import { Inertia, shouldIntercept } from '@inertiajs/inertia'\n\nexport default {\n  functional: true,\n  props: {\n    data: {\n      type: Object,\n      default: () => ({}),\n    },\n    href: {\n      type: String,\n      required: true,\n    },\n    method: {\n      type: String,\n      default: 'get',\n    },\n    replace: {\n      type: Boolean,\n      default: false,\n    },\n    preserveScroll: {\n      type: Boolean,\n      default: false,\n    },\n    preserveState: {\n      type: Boolean,\n      default: false,\n    },\n    only: {\n      type: Array,\n      default: () => [],\n    },\n    headers: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  render(h, { props, data, children }) {\n    data.on = {\n      click: () => ({}),\n      cancelToken: () => ({}),\n      start: () => ({}),\n      progress: () => ({}),\n      finish: () => ({}),\n      cancel: () => ({}),\n      success: () => ({}),\n      ... (data.on || {}),\n    }\n\n    return h('a', {\n      ...data,\n      attrs: {\n        ...data.attrs,\n        href: props.href,\n      },\n      on: {\n        ...data.on,\n        click: event => {\n          data.on.click(event)\n\n          if (shouldIntercept(event)) {\n            event.preventDefault()\n\n            Inertia.visit(props.href, {\n              data: props.data,\n              method: props.method,\n              replace: props.replace,\n              preserveScroll: props.preserveScroll,\n              preserveState: props.preserveState,\n              only: props.only,\n              headers: props.headers,\n              onCancelToken: data.on.cancelToken,\n              onStart: data.on.start,\n              onProgress: data.on.progress,\n              onFinish: data.on.finish,\n              onCancel: data.on.cancel,\n              onSuccess: data.on.success,\n            })\n          }\n        },\n      },\n    }, children)\n  },\n}\n","import { Inertia } from '@inertiajs/inertia'\n\nexport default {\n  created() {\n    if (!this.$options.remember) {\n      return\n    }\n\n    if (Array.isArray(this.$options.remember)) {\n      this.$options.remember = { data: this.$options.remember }\n    }\n\n    if (typeof this.$options.remember === 'string') {\n      this.$options.remember = { data: [this.$options.remember] }\n    }\n\n    if (typeof this.$options.remember.data === 'string') {\n      this.$options.remember = { data: [this.$options.remember.data] }\n    }\n\n    const stateKey = this.$options.remember.key instanceof Function\n      ? this.$options.remember.key.call(this)\n      : this.$options.remember.key\n\n    const restored = Inertia.restore(stateKey)\n\n    this.$options.remember.data.forEach(key => {\n      if (restored !== undefined && restored[key] !== undefined) {\n        this[key] = restored[key]\n      }\n\n      this.$watch(key, () => {\n        Inertia.remember(\n          this.$options.remember.data.reduce((data, key) => ({ ...data, [key]: this[key] }), {}),\n          stateKey\n        )\n      }, { immediate: true, deep: true })\n    })\n  },\n}\n","import link from './link'\nimport remember from './remember'\nimport { Inertia } from '@inertiajs/inertia'\n\nlet app = {}\n\nexport default {\n  name: 'Inertia',\n  props: {\n    initialPage: {\n      type: Object,\n      required: true,\n    },\n    resolveComponent: {\n      type: Function,\n      required: true,\n    },\n    transformProps: {\n      type: Function,\n      default: props => props,\n    },\n  },\n  data() {\n    return {\n      component: null,\n      page: {},\n      key: null,\n    }\n  },\n  created() {\n    app = this\n    Inertia.init({\n      initialPage: this.initialPage,\n      resolveComponent: this.resolveComponent,\n      transformProps: this.transformProps,\n      swapComponent: async ({ component, page, preserveState }) => {\n        this.component = component\n        this.page = page\n        this.key = preserveState ? this.key : Date.now()\n      },\n    })\n  },\n  render(h) {\n    if (this.component) {\n      const child = h(this.component, {\n        key: this.key,\n        props: this.page.props,\n        scopedSlots: this.$scopedSlots,\n      })\n\n      if (this.component.layout) {\n        if (typeof this.component.layout === 'function') {\n          return this.component.layout(h, child)\n        } else if (Array.isArray(this.component.layout)) {\n          return this.component.layout\n            .concat(child)\n            .reverse()\n            .reduce((child, layout) => h(layout, [child]))\n        }\n\n        return h(this.component.layout, [child])\n      }\n\n      return child\n    }\n  },\n  install(Vue) {\n    console.warn('Registering the Inertia Vue plugin via the \"app\" component has been deprecated. Use the new \"plugin\" named export instead.\\n\\nimport { plugin } from \\'@inertiajs/inertia-vue\\'\\n\\nVue.use(plugin)')\n    plugin.install(Vue)\n  },\n}\n\nexport const plugin = {\n  install(Vue) {\n    Object.defineProperty(Vue.prototype, '$inertia', { get: () => Inertia })\n    Object.defineProperty(Vue.prototype, '$page', { get: () => app.page })\n    Vue.mixin(remember)\n    Vue.component('InertiaLink', link)\n  },\n}\n"],"names":["functional","props","data","type","Object","default","href","String","required","method","replace","Boolean","preserveScroll","preserveState","only","Array","headers","render","h","children","on","click","cancelToken","start","progress","finish","cancel","success","attrs","event","shouldIntercept","preventDefault","Inertia","visit","onCancelToken","onStart","onProgress","onFinish","onCancel","onSuccess","created","this","$options","remember","isArray","stateKey","key","Function","call","restored","restore","forEach","undefined","_this","$watch","reduce","immediate","deep","app","name","initialPage","resolveComponent","transformProps","component","page","init","swapComponent","Date","now","child","scopedSlots","$scopedSlots","layout","concat","reverse","install","Vue","console","warn","plugin","defineProperty","prototype","get","mixin","link"],"mappings":"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"}