{"version":3,"file":"index.js","sources":["../src/modal.js","../src/inertia.js","../src/debounce.js","../src/should-intercept.js"],"sourcesContent":["export default {\n  modal: null,\n  listener: null,\n\n  show(html) {\n    if (typeof html === 'object') {\n      html = `All Inertia requests must receive a valid Inertia response, however a plain JSON response was received.<hr>${JSON.stringify(html)}`\n    }\n\n    let page = document.createElement('html')\n    page.innerHTML = html\n    page.querySelectorAll('a').forEach(a => a.setAttribute('target', '_top'))\n\n    this.modal = document.createElement('div')\n    this.modal.style.position = 'fixed'\n    this.modal.style.width = '100vw'\n    this.modal.style.height = '100vh'\n    this.modal.style.padding = '50px'\n    this.modal.style.boxSizing = 'border-box'\n    this.modal.style.backgroundColor = 'rgba(0, 0, 0, .6)'\n    this.modal.style.zIndex = 200000\n    this.modal.addEventListener('click', () => this.hide())\n\n    let iframe = document.createElement('iframe')\n    iframe.style.backgroundColor = 'white'\n    iframe.style.borderRadius = '5px'\n    iframe.style.width = '100%'\n    iframe.style.height = '100%'\n    this.modal.appendChild(iframe)\n\n    document.body.prepend(this.modal)\n    document.body.style.overflow = 'hidden'\n    iframe.contentWindow.document.open()\n    iframe.contentWindow.document.write(page.outerHTML)\n    iframe.contentWindow.document.close()\n\n    this.listener = this.hideOnEscape.bind(this)\n    document.addEventListener('keydown', this.listener)\n  },\n\n  hide() {\n    this.modal.outerHTML = ''\n    this.modal = null\n    document.body.style.overflow = 'visible'\n    document.removeEventListener('keydown', this.listener)\n  },\n\n  hideOnEscape(event) {\n    if (event.keyCode === 27) {\n      this.hide()\n    }\n  },\n}\n","import Axios from 'axios'\nimport debounce from './debounce'\nimport modal from './modal'\n\nexport default {\n  resolveComponent: null,\n  swapComponent: null,\n  transformProps: null,\n  cancelToken: null,\n  visitId: null,\n  page: null,\n\n  init({ initialPage, resolveComponent, swapComponent, transformProps }) {\n    this.resolveComponent = resolveComponent\n    this.swapComponent = swapComponent\n    this.transformProps = page => {\n      page.props = transformProps(page.props)\n      return page\n    }\n\n    if (window.history.state && this.navigationType() === 'back_forward') {\n      this.setPage(window.history.state)\n    } else if (window.sessionStorage.getItem('inertia.hardVisit')) {\n      window.sessionStorage.removeItem('inertia.hardVisit')\n      this.setPage(initialPage, { preserveState: true })\n    } else {\n      initialPage.url += window.location.hash\n      this.setPage(initialPage)\n    }\n\n    this.fireEvent('navigate', { detail: { page: initialPage } })\n\n    window.addEventListener('popstate', this.restoreState.bind(this))\n    document.addEventListener('scroll', debounce(this.handleScrollEvent.bind(this), 100), true)\n  },\n\n  scrollRegions() {\n    return document.querySelectorAll('[scroll-region]')\n  },\n\n  handleScrollEvent(event) {\n    if (typeof event.target.hasAttribute === 'function' && event.target.hasAttribute('scroll-region')) {\n      this.saveScrollPositions()\n    }\n  },\n\n  saveScrollPositions() {\n    this.replaceState({\n      ...window.history.state,\n      scrollRegions: Array.prototype.slice.call(this.scrollRegions()).map(region => {\n        return {\n          top: region.scrollTop,\n          left: region.scrollLeft,\n        }\n      }),\n    })\n  },\n\n  resetScrollPositions() {\n    document.documentElement.scrollTop = 0\n    document.documentElement.scrollLeft = 0\n    this.scrollRegions().forEach(region => {\n      region.scrollTop = 0\n      region.scrollLeft = 0\n    })\n  },\n\n  restoreScrollPositions(page) {\n    if (page.scrollRegions) {\n      this.scrollRegions().forEach((region, index) => {\n        region.scrollTop = page.scrollRegions[index].top\n        region.scrollLeft = page.scrollRegions[index].left\n      })\n    }\n  },\n\n  navigationType() {\n    if (window.performance && window.performance.getEntriesByType('navigation').length) {\n      return window.performance.getEntriesByType('navigation')[0].type\n    }\n  },\n\n  isInertiaResponse(response) {\n    return response && response.headers['x-inertia']\n  },\n\n  isHardVisit(response) {\n    return response && response.status === 409 && response.headers['x-inertia-location']\n  },\n\n  fireEvent(name, options) {\n    return document.dispatchEvent(\n      new CustomEvent(`inertia:${name}`, options),\n    )\n  },\n\n  cancelActiveVisits() {\n    if (this.cancelToken) {\n      this.cancelToken.cancel()\n    }\n\n    this.cancelToken = Axios.CancelToken.source()\n  },\n\n  createVisitId() {\n    this.visitId = {}\n    return this.visitId\n  },\n\n  visit(url, {\n    method = 'get',\n    data = {},\n    replace = false,\n    preserveScroll = false,\n    preserveState = false,\n    only = [],\n    headers = {},\n    onCancelToken = () => ({}),\n    onStart = () => ({}),\n    onProgress = () => ({}),\n    onFinish = () => ({}),\n    onCancel = () => ({}),\n    onSuccess = () => ({}),\n  } = {}) {\n    let visit = { url, ...arguments[1] }\n    if (onStart(visit) === false || !this.fireEvent('start', { cancelable: true, detail: { visit } } )) {\n      return\n    }\n    this.cancelActiveVisits()\n    this.saveScrollPositions()\n    let visitId = this.createVisitId()\n    onCancelToken(this.cancelToken)\n\n    return new Proxy(\n      Axios({\n        method,\n        url: url.toString(),\n        data: method.toLowerCase() === 'get' ? {} : data,\n        params: method.toLowerCase() === 'get' ? data : {},\n        cancelToken: this.cancelToken.token,\n        headers: {\n          ...headers,\n          Accept: 'text/html, application/xhtml+xml',\n          'X-Requested-With': 'XMLHttpRequest',\n          'X-Inertia': true,\n          ...(only.length ? {\n            'X-Inertia-Partial-Component': this.page.component,\n            'X-Inertia-Partial-Data': only.join(','),\n          } : {}),\n          ...(this.page.version ? { 'X-Inertia-Version': this.page.version } : {}),\n        },\n        onUploadProgress: progress => {\n          progress.percentage = Math.round(progress.loaded / progress.total * 100)\n          this.fireEvent('progress', { detail: { progress } })\n          onProgress(progress)\n        },\n      }).then(response => {\n        if (!this.isInertiaResponse(response)) {\n          return Promise.reject({ response })\n        }\n        if (only.length && response.data.component === this.page.component) {\n          response.data.props = { ...this.page.props, ...response.data.props }\n        }\n        return this.setPage(response.data, { visitId, replace, preserveScroll, preserveState })\n      }).then(() => {\n        this.fireEvent('success', { detail: { page: this.page } })\n        return onSuccess(this.page)\n      }).catch(error => {\n        if (this.isInertiaResponse(error.response)) {\n          return this.setPage(error.response.data, { visitId })\n        } else if (Axios.isCancel(error)) {\n          onCancel()\n        } else if (this.isHardVisit(error.response)) {\n          this.hardVisit(error.response.headers['x-inertia-location'])\n        } else if (error.response) {\n          if (this.fireEvent('invalid', { cancelable: true, detail: { response: error.response } })) {\n            modal.show(error.response.data)\n          }\n        } else {\n          return Promise.reject(error)\n        }\n      }).catch(error => {\n        if (this.fireEvent('error', { cancelable: true, detail: { error } })) {\n          return Promise.reject(error)\n        }\n      }).finally(() => {\n        this.fireEvent('finish')\n        onFinish()\n      }), {\n        get: function(target, prop) {\n          console.warn('Inertia.js visit promises have been deprecated and will be removed in a future release. Please use the new visit event callbacks instead.\\n\\nLearn more at https://inertiajs.com/manual-visits#promise-deprecation')\n          return target[prop].bind(target)\n        },\n      },\n    )\n  },\n\n  hardVisit(url) {\n    window.sessionStorage.setItem('inertia.hardVisit', true)\n    window.location.href = url\n  },\n\n  setPage(page, { visitId = this.createVisitId(), replace = false, preserveScroll = false, preserveState = false } = {}) {\n    this.page = this.transformProps(page)\n    return Promise.resolve(this.resolveComponent(page.component)).then(component => {\n      if (visitId === this.visitId) {\n        preserveState = typeof preserveState === 'function' ? preserveState(page) : preserveState\n        preserveScroll = typeof preserveScroll === 'function' ? preserveScroll(page) : preserveScroll\n        replace = replace || page.url === `${window.location.pathname}${window.location.search}`\n        replace ? this.replaceState(page, preserveState) : this.pushState(page)\n        this.swapComponent({ component, page, preserveState }).then(() => {\n          if (!preserveScroll) {\n            this.resetScrollPositions()\n          }\n          if (!replace) {\n            this.fireEvent('navigate', { detail: { page: page } })\n          }\n        })\n      }\n    })\n  },\n\n  pushState(page) {\n    window.history.pushState({\n      cache: {},\n      ...page,\n    }, '', page.url)\n  },\n\n  replaceState(page, preserveState = false) {\n    window.history.replaceState({\n      ...{ cache: preserveState && window.history.state ? window.history.state.cache : {} },\n      ...page,\n    }, '', page.url)\n  },\n\n  restoreState(event) {\n    if (event.state) {\n      const page = this.transformProps(event.state)\n      let visitId = this.createVisitId()\n      return Promise.resolve(this.resolveComponent(page.component)).then(component => {\n        if (visitId === this.visitId) {\n          this.swapComponent({ component, page, preserveState: false }).then(() => {\n            this.restoreScrollPositions(page)\n            this.fireEvent('navigate', { detail: { page: page } })\n          })\n        }\n      })\n    }\n  },\n\n  get(url, data = {}, options = {}) {\n    return this.visit(url, { ...options, method: 'get', data })\n  },\n\n  replace(url, options = {}) {\n    return this.visit(url, { preserveState: true, ...options, replace: true })\n  },\n\n  reload(options = {}) {\n    return this.replace(window.location.href, options)\n  },\n\n  post(url, data = {}, options = {}) {\n    return this.visit(url, { preserveState: true, ...options, method: 'post', data })\n  },\n\n  put(url, data = {}, options = {}) {\n    return this.visit(url, { preserveState: true, ...options, method: 'put', data })\n  },\n\n  patch(url, data = {}, options = {}) {\n    return this.visit(url, { preserveState: true, ...options, method: 'patch', data })\n  },\n\n  delete(url, options = {}) {\n    return this.visit(url, { ...options, method: 'delete' })\n  },\n\n  remember(data, key = 'default') {\n    let newState = { ...window.history.state }\n    newState.cache = newState.cache || {}\n    newState.cache[key] = data\n    this.replaceState(newState)\n  },\n\n  restore(key = 'default') {\n    if (window.history.state.cache && window.history.state.cache[key]) {\n      return window.history.state.cache[key]\n    }\n  },\n\n  on(type, callback) {\n    const listener = event => {\n      const response = callback(event)\n\n      if (event.cancelable && !event.defaultPrevented && response === false) {\n        event.preventDefault()\n      }\n    }\n\n    document.addEventListener(`inertia:${type}`, listener)\n    return () => {\n      document.removeEventListener(`inertia:${type}`, listener)\n    }\n  },\n}\n","export default function debounce(fn, delay) {\n  let timeoutID = null\n  return function () {\n    clearTimeout(timeoutID)\n    timeoutID = setTimeout(() => fn.apply(this, arguments), delay)\n  }\n}\n","export default function shouldIntercept(event) {\n  return !(\n    (event.target && event.target.isContentEditable)\n    || event.defaultPrevented\n    || event.which > 1\n    || event.altKey\n    || event.ctrlKey\n    || event.metaKey\n    || event.shiftKey\n  )\n}\n"],"names":["modal","listener","show","html","JSON","stringify","page","document","createElement","innerHTML","querySelectorAll","forEach","a","setAttribute","this","style","position","width","height","padding","boxSizing","backgroundColor","zIndex","addEventListener","_this","hide","iframe","borderRadius","appendChild","body","prepend","overflow","contentWindow","open","write","outerHTML","close","hideOnEscape","bind","removeEventListener","event","keyCode","resolveComponent","swapComponent","transformProps","cancelToken","visitId","init","fn","timeoutID","initialPage","props","window","history","state","navigationType","setPage","sessionStorage","getItem","removeItem","preserveState","url","location","hash","fireEvent","detail","restoreState","handleScrollEvent","clearTimeout","setTimeout","apply","arguments","scrollRegions","target","hasAttribute","saveScrollPositions","replaceState","Array","prototype","slice","call","map","region","top","scrollTop","left","scrollLeft","resetScrollPositions","documentElement","restoreScrollPositions","index","performance","getEntriesByType","length","type","isInertiaResponse","response","headers","isHardVisit","status","name","options","dispatchEvent","CustomEvent","cancelActiveVisits","cancel","Axios","CancelToken","source","createVisitId","visit","method","data","replace","preserveScroll","only","onCancelToken","onStart","onProgress","onFinish","onCancel","onSuccess","cancelable","Proxy","toString","toLowerCase","params","token","Accept","X-Requested-With","X-Inertia","X-Inertia-Partial-Component","component","X-Inertia-Partial-Data","join","version","X-Inertia-Version","onUploadProgress","progress","percentage","Math","round","loaded","total","then","Promise","reject","error","isCancel","hardVisit","get","prop","console","warn","setItem","href","resolve","_this2","pathname","search","pushState","cache","_this3","reload","post","put","patch","remember","key","newState","restore","on","callback","defaultPrevented","preventDefault","isContentEditable","which","altKey","ctrlKey","metaKey","shiftKey"],"mappings":"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"}